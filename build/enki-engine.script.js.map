{"version":3,"sources":["webpack://EnkiEngine/webpack/bootstrap","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/bytesToUuid.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/index.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/md5.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/rng.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/v1.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/v3.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/v35.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/v4.js","webpack://EnkiEngine/./node_modules/uuid/dist/esm-browser/v5.js","webpack://EnkiEngine/./src/componentManager.js","webpack://EnkiEngine/./src/components/index.js","webpack://EnkiEngine/./src/components/position.js","webpack://EnkiEngine/./src/entityManager.js","webpack://EnkiEngine/./src/index.js","webpack://EnkiEngine/./src/storage/index.js","webpack://EnkiEngine/./src/storage/memoryStorage.js","webpack://EnkiEngine/./src/systemManager.js","webpack://EnkiEngine/./src/systems/index.js","webpack://EnkiEngine/./src/systems/move.js","webpack://EnkiEngine/./src/utils/validate.js"],"names":["ComponentManager","storage","verbose","_storage","_registeredComponents","Map","_log","$msg","console","log","_validate","ComponentId","componentValue","c","get","Object","entries","k","v","validateFunctionName","charAt","toUpperCase","slice","optional","type","args","push","allowed","childType","Validate","defaultSchema","keys","includes","add","entityId","ComponentName","value","defaultValues","fromEntries","map","addEntityComponent","assign","remove","removeEntityComponent","register","componentSchema","hasOwnProperty","name","data","set","list","Components","Position","x","y","EntityManager","template","entity","addEntity","removeEntity","id","getEntity","getAll","getEntities","values","Engine","storageType","mode","storageInstance","rest","Storage","entityMgr","componentMgr","systemMgr","Systems","s","SystemManager","MemoryStorage","_verbose","Entities","Set","ComponentMap","EntityComponents","e","has","undefined","getEntityComponents","getEntityByComponents","components","reduce","acc","val","size","filter","i","componentName","component","_registeredSystems","_query","q","system","query","execute","entities","forEach","Move","position","isNumber","isNaN","isAny","isString","String","isEnum","isArray","Array","res","cur","TypeError"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AACA;AACA;AACA;AACA;;AAEA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA,4BAA4B;AAC5B;;AAEA;AACA;;AAEe,0EAAW,E;;;;;;;;;;;;ACjB1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACA;AACA;;;;;;;;;;;;;ACFxC;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,aAAa;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,kEAAG,E;;;;;;;;;;;;ACtNlB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,SAAS;AAC5B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,mEAAI,E;;;;;;;;;;;;AC5FnB;AAAA;AAAA;AAA2B;AACgB;AAC3C;AACA;AACA;;AAEA;;A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","file":"enki-engine.script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  var offset = offset_ || 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + '-' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + '-' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + '-' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + '-' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\nexport default bytesToUuid;","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || bytesToUuid(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import bytesToUuid from './bytesToUuid.js';\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  var bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function (hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = uuidToBytes(namespace);\n    }\n\n    if (!Array.isArray(value)) {\n      throw TypeError('value must be an array of bytes');\n    }\n\n    if (!Array.isArray(namespace) || namespace.length !== 16) {\n      throw TypeError('namespace must be uuid string or an Array of 16 byte values');\n    } // Per 4.3\n\n\n    var bytes = hashfunc(namespace.concat(value));\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return bytesToUuid(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return bytesToUuid(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import * as Validate from './utils/validate';\n\nexport const ComponentManager = (storage, verbose) => {\n\n  const _storage = storage;\n  const _registeredComponents = new Map();\n\n  const _log = (...$msg) => {\n    if (verbose) {\n      console.log('Component Manager: ', ...$msg);\n    }\n  };\n\n  const _validate = (ComponentId, componentValue) => {\n    //check if component is registered\n    const c = _registeredComponents.get(ComponentId);\n    if (typeof c === 'undefined') {\n      return false;\n    }\n\n    //check if values are correct\n    for (let [k, v] of Object.entries(c)) {\n      const validateFunctionName = 'is' + v['type'].charAt(0).toUpperCase() + v['type'].slice(1);\n      //if value is not passed and we have a default or value is optional then we are good\n      if (typeof componentValue[k] === 'undefined' && (\n        (typeof (v.optional) !== 'undefined' && v.optional === true) ||\n        typeof (v.default) !== 'undefined')\n      ) {\n        continue;\n      }\n      // 'any' type of data is not validated.\n      if(v.type == 'any'){\n        continue;\n      }\n      //we have a value so we test\n      let args = [];\n      if(v.type == 'enum') {\n        args.push(v.allowed);\n      }\n      if(v.type == 'array'){\n        args.push(v.childType);\n      }\n      if (!Validate[validateFunctionName](componentValue[k],...args)) {\n        _log(`${k} => ${componentValue[k]} failed the validation ${validateFunctionName}`);\n        return false;\n      }\n    }\n\n    //check if extra non existent property were passed to component\n    const defaultSchema = Object.keys(c);\n    for (const k of Object.keys(componentValue)) {\n      if (!defaultSchema.includes(k)) {\n        _log(`${k} is not a valid property for the ${ComponentId} Component.`);\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  /**\n   * Add a Component to an existing entity\n   * @param {any} entityId - Entity Id\n   * @param {string} ComponentId - Component type to add\n   * @param {object} value - Object following the data structure of component to pass initial values to component\n   * @returns {boolean} True if succesfull else false\n   */\n  const add = (entityId, ComponentName, value = {}) => {\n    if (_validate(ComponentName, value)) {\n      const c = _registeredComponents.get(ComponentName);\n      const defaultValues = Object.fromEntries(Object.entries(c).map(([k, v]) => {\n        return [k, v.default];\n      }));\n      _storage.addEntityComponent(entityId, ComponentName, Object.assign(defaultValues, value));\n      return true;\n    } else {\n      _log(`Component ${ComponentName} could not added to ${entityId} due to fail validation`);\n      return false;\n    }\n  };\n\n  /**\n   * Remove a component from an existing Entity\n   * @param {any} entityId - Entity Id\n   * @param {string} ComponentName - Component to remove\n   * @returns {boolean} - True if successfull else false\n   */\n  const remove = (entityId, ComponentName) => {\n    return _storage.removeEntityComponent(entityId, ComponentName);\n  };\n\n  /**\n   * Register a new component type\n   * @param {object} componentSchema\n   * @returns {boolean} - True if successfull, else false\n   */\n  const register = (componentSchema) => {\n    if(!componentSchema.hasOwnProperty('name')) {\n      return false;\n    }\n    _log(`Registering ${componentSchema.name} Component`)\n    const data = componentSchema.data || {};\n    _registeredComponents.set(componentSchema.name, data);\n    return true;\n  };\n\n  const list = () => {\n    return new Map(_registeredComponents)\n  }\n\n  return {\n    add,\n    remove,\n    register,\n    list\n  };\n};\n","import { Position} from './position';\n\nexport const Components = {\n  Position,\n}\n","export const Position = {\n  name: 'Position',\n  data: {\n    x: {type: 'number', default: 0},\n    y: {type: 'number', default: 0},\n  },\n};\n","import {v4 as uuidv4} from 'uuid';\n\nexport const EntityManager = (storage) => {\n  const _storage = storage;\n\n  const add = (template) => {\n    const entity = uuidv4();\n    _storage.addEntity(entity);\n    return entity;\n  };\n\n  const remove = (entity) => {\n    _storage.removeEntity(entity);\n  };\n\n  const get = (id) => {\n    _storage.getEntity(id);\n    return id;\n  };\n\n  const getAll = () => {\n    return _storage.getEntities().values();\n  };\n\n  return {\n    add,\n    get,\n    getAll,\n    remove,\n  };\n};\n","import { EntityManager } from './entityManager.js';\nimport { ComponentManager } from './componentManager.js';\nimport { SystemManager } from './systemManager.js';\nimport { Storage } from './storage/index.js';\n\n// import predefined components and systems\nimport {Components} from './components';\nimport {Systems} from './systems';\n\n/**\n * Create an Enki Engine instance\n * @param {string} storageType - The type of storage to use, either 'MemoryStorage' or 'custom'\n * @param {string} mode - debug or production.\n * @param {func} storageInstance - a Storage instance, only used if storageType is set to 'custom'\n * @param {any} rest - unused at the moment\n * @returns {{EntityManager: {add: (function(*): string), remove: remove}, ComponentManager: {add: add, remove: (function(*=, *=): boolean|*), register: register}, SystemManager: {execute: execute, register: register}}}\n * @constructor\n */\nconst Engine = ({storageType = 'MemoryStorage', mode = 'production', storageInstance = null, ...rest} = {}) => {\n\n  //get storage\n  console.log(`Starting Enki ECS Engine with ${storageType}`)\n\n  const verbose = mode == 'debug' ? true : false;\n  let storage = null;\n  if(storageType == 'custom') {\n    storage = storageInstance(verbose);\n  } else {\n    storage = Storage[storageType](verbose);\n  }\n\n  const entityMgr = EntityManager(storage, verbose);\n\n  const componentMgr = ComponentManager(storage, verbose);\n  //register predefined Components\n  for(let c of Object.values(Components)) {\n    componentMgr.register(c)\n  }\n\n  const systemMgr = SystemManager(storage, verbose);\n  //register predefined Systems\n  for(let s of Object.values(Systems)) {\n    systemMgr.register(s)\n  }\n\n  return {\n    EntityManager: entityMgr,\n    SystemManager: systemMgr,\n    ComponentManager: componentMgr\n  }\n\n}\n\nexport default Engine;\n","import { MemoryStorage } from './memoryStorage';\n\nexport const Storage =  {\n  MemoryStorage\n}\n","/**\n *\n * @param verbose\n * @returns {{addEntity: (function(*): Set<any>), removeEntityComponent: removeEntityComponent, getEntityComponents: (function(*): any), getEntities: (function(): Set<*>), addEntityComponent: addEntityComponent, getEntity: (function(*=): *), removeEntity: (function(*=): boolean), getEntityByComponents: (function(Array): *)}}\n * @constructor\n */\nexport const MemoryStorage = (verbose) => {\n  const _verbose = verbose;\n  const Entities = new Set(); //list of entities created\n  const ComponentMap = new Map(); //a map for quickly retrieve entity that have a given component (ComponentId => [entity1, entity2...])\n  const EntityComponents = new Map(); // a 3D map with primary key being entity ID with a map of all components\n\n  const _log = ( ...$msg) => {\n    if(verbose) {\n      console.log('Memory Store: ',...$msg)\n    }\n  }\n\n  /**\n   * Add an Entity to storage\n   * @param {any} entityId - Any value that is unique\n   * @returns {Set<any>}\n   */\n  const addEntity = (entityId) => {\n    EntityComponents.set(entityId, new Map())\n    _log(`Saving Entity ${entityId}`)\n    return Entities.add(entityId)\n  }\n\n  /**\n   * Remove an entity from storage\n   * @param entityId\n   * @returns {boolean}\n   */\n  const removeEntity = (entityId) => {\n    _log(`Removing Entity ${entityId}`)\n    return Entities.delete(entityId)\n  }\n\n  /**\n   * Return EntityId or undefined if the entity does not exists\n   * @param entityId\n   * @returns {entityId}\n   */\n  const getEntity = (entityId) => {\n    _log(`Get Entity ${entityId}`)\n    const e = Entities.has(entityId) ? entityId : undefined;\n    _log(`Found Entity ${entityId}`)\n    return e\n  }\n\n  /**\n   * Return a Set containing all entities\n   * @returns {Set<any>}\n   */\n  const getEntities = () => {\n    //returning a new set so users can not override the Entities Set by inadvertence\n    return new Set(Entities);\n  }\n\n  /**\n   * Get all components attached to an entity\n   * @param {any} entityId - EntityId to retrieve components from\n   * @returns {Set} - Set of components\n   */\n  const getEntityComponents = (entityId) => {\n    _log(`Get Entity Components for ${entityId}`)\n    return EntityComponents.has(entityId) ? EntityComponents.get(entityId) : new Set();\n  }\n\n  /**\n   * List all entities that have the component attached\n   * @param {array} components - array of components name\n   * @returns {Set} - List of entities\n   */\n  const getEntityByComponents = (components) => {\n    _log(`Get List of Entities by Components for `,components)\n    const e =  components.reduce((acc, val) => {\n      if(acc.size == 0){\n        return ComponentMap.get(val) || new Set();\n      }\n\n      return new Set([...acc].filter(i => ComponentMap.get(val).has(i)))\n    }, new Set());\n    _log(`Found Entities`, e)\n    return e;\n  }\n\n  /**\n   * Add a component to an entity\n   * @param {any} entityId - EntityId\n   * @param {string} componentName - Name of Component to add to entity\n   * @param {object} component - Component value for initialisation\n   */\n  const addEntityComponent = ( entityId, componentName, component) => {\n    _log(`Add Component ${componentName} to Entity ${entityId}`)\n    if(!ComponentMap.has(componentName)) {\n      ComponentMap.set(componentName, new Set([entityId]));\n      EntityComponents.get(entityId).set(componentName, component);\n    } else {\n      ComponentMap.get(componentName).add(entityId);\n      EntityComponents.get(entityId).set(componentName, component);\n    }\n  }\n\n  /**\n   * Remove Component from an entity\n   * @param {any }entityId - EntityId to remove component from\n   * @param {string} componentName - Component Name\n   * @returns {boolean} - True if successfull\n   */\n  const removeEntityComponent = (entityId, componentName) => {\n    _log(`Remove Component ${componentName} to Entity ${entityId}`)\n    if(!ComponentMap.has(componentName)) {\n      return false;\n    } else {\n      return EntityComponents.get(entityId).delete(componentName) &&\n        ComponentMap.get(componentName).delete(entityId);\n    }\n  }\n\n  return {\n    addEntity,\n    removeEntity,\n    getEntity,\n    getEntities,\n    addEntityComponent,\n    removeEntityComponent,\n    getEntityByComponents,\n    getEntityComponents\n  }\n}\n","import {isString, isArray} from './utils/validate';\n\nexport const SystemManager = (storage, verbose) => {\n\n  const _storage = storage;\n  const _registeredSystems = new Map();\n\n\n  const _log = ( ...$msg) => {\n    if(verbose) {\n      console.log('System Manager: ',...$msg)\n    }\n  }\n\n  const _query = (q) => {\n    return _storage.getEntityByComponents(q);\n  }\n\n  const _validate = (system) => {\n    //check that system is a function with the correct prototype\n    if(!typeof(system) === 'function' || !system.hasOwnProperty('query') || !system.hasOwnProperty('name')) {\n      _log('Trying to register a system that is either not a function or does not have a name and query defined');\n      return false;\n    }\n    if(!isString(system.name)){\n      _log(`The name of a system must be a string`);\n      return false\n    }\n\n    if(!isArray(system.query, 'string')){\n      _log(`System ${system.name} does not have a correct query. A query must be an array of string.`)\n    }\n\n    return true\n  }\n\n  const execute = () => {\n    // loop through all systems\n    for(let [name, system] of _registeredSystems){\n      const entities = _query(system.query);\n      entities.forEach((e) => {\n        system(_storage.getEntityComponents(e))\n      })\n    }\n  }\n\n  const register = (system) => {\n    if(_validate(system)){\n      _log(`Registering ${system.name} System`)\n      _registeredSystems.set(system.name, system);\n    } else {\n      return false;\n    }\n  }\n\n  return {\n    execute,\n    register\n  }\n\n}\n","import {Move} from './move';\n\nexport const Systems = {\n  Move,\n}\n","\n\nexport const Move = (components, log) => {\n  const position = components.get('Position')\n  position.x += 10;\n  position.y += 10;\n  return components;\n};\n\nMove.query = ['Position'];\n","\nexport const isNumber = (value) => {\n  return !isNaN(value)\n}\n\nexport const isAny = (value) => {\n  if(typeof(value) !== 'undefined'){\n    return true;\n  }\n  return false;\n}\n\nexport const isString = (value) => {\n  if (typeof value === 'string' || value instanceof String) {\n    return true;\n  }\n  return false;\n}\n\nexport const isEnum = (value, allowed) => {\n  return allowed.includes(value)\n}\n\nexport const isArray = (value, type) => {\n  //check if array\n  const isArray = Array.isArray(value);\n  if(!isArray)  {\n    return false\n  }\n  //check type\n\n  let res = false;\n  switch (type) {\n    case 'string':\n      res = value.reduce((acc,cur) => {\n        return acc && isString(cur)\n      }, true)\n      break;\n    case 'number':\n      res = value.reduce((acc,cur) => {\n        return acc && isNumber(cur)\n      }, true)\n      break;\n    case 'mixed' : res = true; break;\n    case 'any': res = true; break;\n    default:\n      throw new TypeError(`Type ${type} not supported in Array`);\n  }\n  return res;\n}\n"],"sourceRoot":""}